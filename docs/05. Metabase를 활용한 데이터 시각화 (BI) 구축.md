# Step 5: Metabaseë¥¼ í™œìš©í•œ ë°ì´í„° ì‹œê°í™” (BI) êµ¬ì¶•

## 1\. í•™ìŠµ ëª©í‘œ

  * ì•ì„  ë‹¨ê³„(Batch, Streaming, ELT)ë¥¼ í†µí•´ ê°€ê³µëœ ë°ì´í„°ë¥¼ **ì‹œê°ì ìœ¼ë¡œ í™•ì¸**í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜ë¥¼ ì¦ëª…í•¨.
  * **BI(Business Intelligence) ë„êµ¬**ë¥¼ ì»¨í…Œì´ë„ˆ í™˜ê²½ì— ë°°í¬í•˜ê³  ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤(Postgres)ì™€ ì—°ë™í•¨.

## 2\. ë„êµ¬ ì„ ì •: Metabase

  * **ì„ ì • ì´ìœ :**
      * **Docker ì¹œí™”ì :** ì´ë¯¸ì§€ í•˜ë‚˜ë¡œ ì¦‰ì‹œ ë°°í¬ ê°€ëŠ¥.
      * **ì§ê´€ì ì¸ UI:** SQLì„ ëª°ë¼ë„ í´ë¦­ë§Œìœ¼ë¡œ ì°¨íŠ¸ ìƒì„± ê°€ëŠ¥ (No-Code/Low-Code).
      * **PostgreSQL í˜¸í™˜ì„±:** ë³„ë„ì˜ ë“œë¼ì´ë²„ ì„¤ì¹˜ ì—†ì´ ë°”ë¡œ ì—°ê²° ê°€ëŠ¥.

## 3\. í™˜ê²½ êµ¬ì„± (`docker-compose.yml`)

ê¸°ì¡´ íŒŒì´í”„ë¼ì¸ì— Metabase ì„œë¹„ìŠ¤ë¥¼ ì¶”ê°€í•˜ì—¬ **ë¶„ì„ í™˜ê²½**ì„ êµ¬ì¶•í•¨.

```yaml
  # 9. Metabase (BI Dashboard)
  metabase:
    image: metabase/metabase:latest
    container_name: de_project_metabase
    ports:
      - "3000:3000"  # ë¸Œë¼ìš°ì € ì ‘ê·¼ í¬íŠ¸
    environment:
      MB_DB_FILE: /metabase-data/metabase.db # ë©”íƒ€ë°ì´í„° ì €ì¥ ìœ„ì¹˜ ì„¤ì •
    volumes:
      # ğŸŒŸ [ì¤‘ìš”] ì»¨í…Œì´ë„ˆê°€ ì¬ì‹œì‘ë˜ì–´ë„ ê³„ì •/ëŒ€ì‹œë³´ë“œ ì •ë³´ê°€ ë‚ ì•„ê°€ì§€ ì•Šë„ë¡ ë³¼ë¥¨ ë§ˆìš´íŠ¸
      - metabase_data:/metabase-data
    depends_on:
      - postgres # DBê°€ ì¼œì ¸ì•¼ ì‹œê°í™”ë„ ê°€ëŠ¥í•˜ë¯€ë¡œ ì˜ì¡´ì„± ì„¤ì •

# ìµœí•˜ë‹¨ ë³¼ë¥¨ ì •ì˜
volumes:
  # ...
  metabase_data:
```

## 4\. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ (Connection)

Docker ë„¤íŠ¸ì›Œí¬ ë‚´ë¶€ í†µì‹ ì„ í†µí•´ Metabase ì»¨í…Œì´ë„ˆê°€ Postgres ì»¨í…Œì´ë„ˆì— ì ‘ì†í•¨.

  * **Host:** `de_project_postgres` (Docker Service Name ì‚¬ìš©)
      * *Localhostê°€ ì•„ë‹˜ì— ì£¼ì˜.*
  * **Port:** `5432`
  * **Database Name:** `analytics_db` (dbtê°€ ë°ì´í„°ë¥¼ ìƒì„±í•œ DW)
  * **Username/Password:** `airflow` / `airflow`

## 5\. ì‹œê°í™” êµ¬í˜„ (Dashboarding)

### 5.1 ëŒ€ìƒ ë°ì´í„°

  * **Schema:** `mart` (dbtê°€ ì •ì œ ë° ì§‘ê³„í•œ ìµœì¢… ë°ì´í„°ì…‹)
  * **Table:** `mart_patient_summary`

### 5.2 ì‹œê°í™” ì‹œë‚˜ë¦¬ì˜¤

dbtê°€ ìƒì„±í•œ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì¸ì‚¬ì´íŠ¸ë¥¼ ë„ì¶œí•¨.

  * **Raw Data View:** ì •ì œëœ í™˜ìë³„ ì´ë²¤íŠ¸ ë¡œê·¸ í™•ì¸.
  * **Metrics:**
      * í™˜ìë³„ ì´ ë°©ë¬¸ íšŸìˆ˜ (`total_events`) ë¶„í¬.
      * ì‹œê°„ëŒ€ë³„ ì´ë²¤íŠ¸ ë°œìƒ ì¶”ì´.

### 5.3 ì‹œê°í™” ì˜ˆì‹œ (Visualization Example)

ë‹¤ìŒì€ Metabaseë¥¼ í†µí•´ êµ¬ì¶•í•œ ëŒ€ì‹œë³´ë“œì˜ ì˜ˆì‹œ í™”ë©´ì…ë‹ˆë‹¤.
![ì‹œê°í™” ì˜ˆì‹œ](../img/visualization.png)
